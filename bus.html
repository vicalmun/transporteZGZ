<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Bus ZGZ</title>
<link rel="stylesheet" href="/style.css">
</head>
<body>
<nav class="nav">
<a href="/bus" class="act">Bus</a>
<a href="/tram">TranvÃ­a</a>
</nav>
<h1>ðŸšŒ Bus</h1>
<form id="f">
<input type="number" id="poste" placeholder="NÂº de poste (ej: 716)" inputmode="numeric" required>
<button type="submit">Ver tiempos</button>
</form>
<div id="r"></div>
<script>
var f=document.getElementById('f'),
    r=document.getElementById('r'),
    p=document.getElementById('poste');

f.onsubmit=function(e){
  e.preventDefault();
  var n=p.value.trim();
  if(!n)return;
  fetch('/api/bus?poste='+n)
    .then(function(x){return x.text()})
    .then(function(html){r.innerHTML=html})
    .catch(function(){r.innerHTML='<p class="err">Error de conexiÃ³n</p>'});
};
</script>
</body>
</html>
